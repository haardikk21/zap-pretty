package zapp

import (
	"bufio"
	"bytes"
	"io"
	"os"
	"strings"
	"testing"
)

func BenchmarkZapdriver(b *testing.B) {
	processor, byteCount, reset, cleanup := preprareBenchmark(io.Discard)
	defer cleanup()

	b.ResetTimer()
	b.ReportAllocs()

	b.SetBytes(byteCount)

	for n := 0; n < b.N; n++ {
		processor.Process()
		reset()
	}
}

func TestBenchmarkCode(t *testing.T) {
	processor, _, reset, cleanup := preprareBenchmark(os.Stdout)
	defer cleanup()

	// This test can be run in verbose mode to ensure the actual benchmark code works as expected
	processor.Process()
	reset()
	processor.Process()
	reset()
}

func preprareBenchmark(output io.Writer) (proc *Processor, byteCount int64, reset func(), cleanup func()) {
	reader := bytes.NewReader([]byte(strings.Join(benchmarkZapdriverLines(), "\n")))
	proc = &Processor{scanner: bufio.NewScanner(reader), output: output}

	return proc, reader.Size(), func() { reader.Seek(0, io.SeekStart) }, func() {}
}

func benchmarkZapdriverLines() []string {
	return []string{
		`{"severity":"DEBUG","time":"2018-12-24T06:38:03.75065493Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae78b2dfee57a28ee22d83fda3e70d3913d343ea5c62c27cb03721ddc3b7","message_num":33730168,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:03.752683864Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae78b2dfee57a28ee22d83fda3e70d3913d343ea5c62c27cb03721ddc3b7","message_num":33730168,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"WARN","time":"2018-12-24T06:38:04.52527045Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae792cf68321ef9b2ed5dc4297362cdf1d64cdcfe12fe53ff3dd75aefcde","message_num":33730169,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"ERROR","time":"2018-12-24T06:38:04.531809727Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae792cf68321ef9b2ed5dc4297362cdf1d64cdcfe12fe53ff3dd75aefcde","message_num":33730169,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"DPANIC","time":"2018-12-24T06:38:04.97902781Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae7a8d6a5a72d14e9dcce60dcccbd544ed57ad7e787b44f944b5c26ebe33","message_num":33730170,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"PANIC","time":"2018-12-24T06:38:04.985163022Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae7a8d6a5a72d14e9dcce60dcccbd544ed57ad7e787b44f944b5c26ebe33","message_num":33730170,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"FATAL","time":"2018-12-24T06:38:05.351362445Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae7b4266a83e35446fbd4a62688c10b69c10493732f0ea480d9d4036a66e","message_num":33730171,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:05.35727121Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae7b4266a83e35446fbd4a62688c10b69c10493732f0ea480d9d4036a66e","message_num":33730171,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:05.974739928Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae7c0bed46666cc5bbc34c025315406b94105babc35160989d2e633d54bf","message_num":33730172,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:05.981040873Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae7c0bed46666cc5bbc34c025315406b94105babc35160989d2e633d54bf","message_num":33730172,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:06.474105214Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae7d4182e962a65de580cd9f3668a9678a6e0545942a434d0b76401aff8d","message_num":33730173,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:06.479475092Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae7d4182e962a65de580cd9f3668a9678a6e0545942a434d0b76401aff8d","message_num":33730173,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:06.488231553Z","caller":"first/second.go:384","message":"writer moved its LIB, moving fork DB in return","labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"384","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:07.072531638Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae7e5470147df2198a7359091381d64ba85526f66d4b11cb105b7b77f834","message_num":33730174,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:07.078646708Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae7e5470147df2198a7359091381d64ba85526f66d4b11cb105b7b77f834","message_num":33730174,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:07.54325446Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae7f430b613168f1f1b9bb1ff120cf0d0b16d3234409deb060a01da98456","message_num":33730175,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:07.549399941Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae7f430b613168f1f1b9bb1ff120cf0d0b16d3234409deb060a01da98456","message_num":33730175,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:08.089627306Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae808105aba0d64d46485eb2abc6e651cae24b048d9c6f15a06dc49c4c58","message_num":33730176,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:08.094626502Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae808105aba0d64d46485eb2abc6e651cae24b048d9c6f15a06dc49c4c58","message_num":33730176,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:08.532308456Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae81061597fc9363201d1d1832b092f70dfbfb4b43a43cdc2d5efd8546da","message_num":33730177,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:08.536390953Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae81061597fc9363201d1d1832b092f70dfbfb4b43a43cdc2d5efd8546da","message_num":33730177,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:08.544489335Z","caller":"first/second.go:384","message":"writer moved its LIB, moving fork DB in return","labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"384","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:09.223510113Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae821944b1fa9b956ec2396e15ce22a0eceaaa043b6fa5b9cd93f33de96f","message_num":33730178,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:09.230281192Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae821944b1fa9b956ec2396e15ce22a0eceaaa043b6fa5b9cd93f33de96f","message_num":33730178,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:10.94487008Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae83785725560f9f0dff0fd61edc606d4b38d35e112535031afae877ae21","message_num":33730179,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:10.97456341Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae83785725560f9f0dff0fd61edc606d4b38d35e112535031afae877ae21","message_num":33730179,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:11.054382576Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae84464f72ebcc79634247671679449faa5ae9181c28b285ffe48879d669","message_num":33730180,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:11.06017036Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae84464f72ebcc79634247671679449faa5ae9181c28b285ffe48879d669","message_num":33730180,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:11.136391617Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae8510dc1bf3a97998b6f41f51113c25410e0ea8684abcb1098c4dc344a5","message_num":33730181,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:11.140471054Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae8510dc1bf3a97998b6f41f51113c25410e0ea8684abcb1098c4dc344a5","message_num":33730181,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:11.228954397Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae86819640f880c6435ffb49289083b06bc322844ad5188ec524f7bf0616","message_num":33730182,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:11.234221059Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae86819640f880c6435ffb49289083b06bc322844ad5188ec524f7bf0616","message_num":33730182,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:11.453279763Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae8730816d8a3e933f5256f559b7fc9afdf98d0a4211a81a6de24ccccf7d","message_num":33730183,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:11.45909646Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae8730816d8a3e933f5256f559b7fc9afdf98d0a4211a81a6de24ccccf7d","message_num":33730183,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:12.010691051Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae885060b8f5e4f2695637df04c63fbd2dd15f64eb2cab16fbea02ab3080","message_num":33730184,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:12.016064594Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae885060b8f5e4f2695637df04c63fbd2dd15f64eb2cab16fbea02ab3080","message_num":33730184,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:12.44861778Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae89153bb8c9f26663646d0e48f898a9cc42897195953b3cf3ceacbf6550","message_num":33730185,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:12.451759867Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae89153bb8c9f26663646d0e48f898a9cc42897195953b3cf3ceacbf6550","message_num":33730185,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:12.458326002Z","caller":"first/second.go:384","message":"writer moved its LIB, moving fork DB in return","labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"384","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:13.061213951Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae8afef97d9f06a7b4649088ab3a4c9bfe10415a77d5c7c39f10ce6d5ce0","message_num":33730186,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:13.068674484Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae8afef97d9f06a7b4649088ab3a4c9bfe10415a77d5c7c39f10ce6d5ce0","message_num":33730186,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:13.617953965Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae8bf41707bfa971eba51a7063c4dedb90243e4784860bb3662d5f9851a2","message_num":33730187,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:13.62585623Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae8bf41707bfa971eba51a7063c4dedb90243e4784860bb3662d5f9851a2","message_num":33730187,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:14.148059091Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae8cd03aa6e3186ffe87d1125a5d51e8ae2b75aca2117bc24e82cb30cd89","message_num":33730188,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:14.158602376Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae8cd03aa6e3186ffe87d1125a5d51e8ae2b75aca2117bc24e82cb30cd89","message_num":33730188,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:14.529122822Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae8d7b45f10de9c231ec934d536f19ff46d1fd580aedc641e2068ee932b4","message_num":33730189,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:14.536805017Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae8d7b45f10de9c231ec934d536f19ff46d1fd580aedc641e2068ee932b4","message_num":33730189,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:14.546794798Z","caller":"first/second.go:384","message":"writer moved its LIB, moving fork DB in return","labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"384","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:14.889313343Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae8ec0f8fe4fa2086947f2de54c917896a8a3c7d9ba73774faf9935d8e44","message_num":33730190,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:14.892623812Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae8ec0f8fe4fa2086947f2de54c917896a8a3c7d9ba73774faf9935d8e44","message_num":33730190,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:15.630730301Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae8f0bcda2a40802cd1040bec71b7192875180e2e3db559505d3a0ae6734","message_num":33730191,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:15.640417806Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae8f0bcda2a40802cd1040bec71b7192875180e2e3db559505d3a0ae6734","message_num":33730191,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:15.944572681Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae90b47d49f836af330ee36debd7c03a4b66b80ee5fe66b83db4226858f9","message_num":33730192,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:15.949779613Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae90b47d49f836af330ee36debd7c03a4b66b80ee5fe66b83db4226858f9","message_num":33730192,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:16.482625236Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae9105ec8f3c0cf9b2d43145487b847c022c6148c060c1dd1d58b4627a65","message_num":33730193,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:16.488737321Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae9105ec8f3c0cf9b2d43145487b847c022c6148c060c1dd1d58b4627a65","message_num":33730193,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:16.94625035Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae926965783801727aef6452f3d020a667b873470bcb7f6ae28722f247f4","message_num":33730194,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:16.952446408Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae926965783801727aef6452f3d020a667b873470bcb7f6ae28722f247f4","message_num":33730194,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:17.604109658Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae93b39fdfad5aa5214ce45f887546ef71382c5bea572a6c7649b8a8f0b3","message_num":33730195,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:17.614268457Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae93b39fdfad5aa5214ce45f887546ef71382c5bea572a6c7649b8a8f0b3","message_num":33730195,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:18.037025552Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae941aa8e2386755cf45b67adfc39642ab29458236004653b4124beee590","message_num":33730196,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:18.043573951Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae941aa8e2386755cf45b67adfc39642ab29458236004653b4124beee590","message_num":33730196,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:18.45869582Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae9551e813feff2c2e0fe7f7970b26f6a1c947d10ed8b6aedddb5468a9d3","message_num":33730197,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:18.464772607Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae9551e813feff2c2e0fe7f7970b26f6a1c947d10ed8b6aedddb5468a9d3","message_num":33730197,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:18.472153144Z","caller":"first/second.go:384","message":"writer moved its LIB, moving fork DB in return","labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"384","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:19.037152027Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae965604fd27ac6c6010cc18238f02adbc630a6e9deecb11e2c8b578d27f","message_num":33730198,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:19.047479171Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae965604fd27ac6c6010cc18238f02adbc630a6e9deecb11e2c8b578d27f","message_num":33730198,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:19.342610798Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae97c11633a294cddd1ddc5cbc62a3b1022ff42d0edea2b1f5bfc34efe81","message_num":33730199,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:19.34703435Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae97c11633a294cddd1ddc5cbc62a3b1022ff42d0edea2b1f5bfc34efe81","message_num":33730199,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`[P:project] Pipeliner: Received live messsage % 100: 33730200`,
		`{"severity":"INFO","time":"2018-12-24T06:38:19.855012781Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae983535e2456899b7409a287da563a041dec7b22f92a556b91ec593223b","message_num":33730200,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:19.858738908Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae983535e2456899b7409a287da563a041dec7b22f92a556b91ec593223b","message_num":33730200,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:20.590861669Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae993360d900ab88b427ade0426ea03218739a4561bb9f307279abe557df","message_num":33730201,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:20.604280464Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae993360d900ab88b427ade0426ea03218739a4561bb9f307279abe557df","message_num":33730201,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:20.613990531Z","caller":"first/second.go:384","message":"writer moved its LIB, moving fork DB in return","labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"384","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:21.190489191Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae9a0cd9ee54cc383bbc022ac70ec63df990d1a1610f7fdb2cea9085edf9","message_num":33730202,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:21.196725804Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae9a0cd9ee54cc383bbc022ac70ec63df990d1a1610f7fdb2cea9085edf9","message_num":33730202,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:21.389711151Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae9bf0ab17a99eb8115432607b1a6b36d776a1ea1d12b63e8b9763d4cef3","message_num":33730203,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:21.397116586Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae9bf0ab17a99eb8115432607b1a6b36d776a1ea1d12b63e8b9763d4cef3","message_num":33730203,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:21.931449318Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae9c346325775165d1cf35223e96319afb648aa35dd456cb057157fbb609","message_num":33730204,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:21.939422517Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae9c346325775165d1cf35223e96319afb648aa35dd456cb057157fbb609","message_num":33730204,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:22.411161958Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae9dbbf712e99c22fb95ea4cd63212298a43eff79fa4f2e324daf5226a33","message_num":33730205,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:22.417363872Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae9dbbf712e99c22fb95ea4cd63212298a43eff79fa4f2e324daf5226a33","message_num":33730205,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:23.058141079Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae9e7123f99449e584c7bd8d92cea2698444ce60013aaa374b9f7a07bcc1","message_num":33730206,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:23.069805523Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae9e7123f99449e584c7bd8d92cea2698444ce60013aaa374b9f7a07bcc1","message_num":33730206,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:23.270699322Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202ae9f7a9ca1ca72981bb454addbed5658f96221b1893440cc51d0bafb6466","message_num":33730207,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:23.274751776Z","caller":"first/second.go:299","message":"processing message","message_id":"0202ae9f7a9ca1ca72981bb454addbed5658f96221b1893440cc51d0bafb6466","message_num":33730207,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:23.327777714Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202aea0dc1e9d83fdb0b17e89b3650397b63ad33886562f2bba4962e42455a0","message_num":33730208,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:23.330750792Z","caller":"first/second.go:299","message":"processing message","message_id":"0202aea0dc1e9d83fdb0b17e89b3650397b63ad33886562f2bba4962e42455a0","message_num":33730208,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:24.73446114Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202aea1e33e8d748370467eae82174c5177c13f699357146afb76563d43a15d","message_num":33730209,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:24.75809393Z","caller":"first/second.go:299","message":"processing message","message_id":"0202aea1e33e8d748370467eae82174c5177c13f699357146afb76563d43a15d","message_num":33730209,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:24.765704347Z","caller":"first/second.go:384","message":"writer moved its LIB, moving fork DB in return","labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"384","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:25.004113323Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202aea259178c65b3cc367ba5f5d62daec47fd9f0bc004f069f0d5aeaa94d46","message_num":33730210,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:25.009885744Z","caller":"first/second.go:299","message":"processing message","message_id":"0202aea259178c65b3cc367ba5f5d62daec47fd9f0bc004f069f0d5aeaa94d46","message_num":33730210,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:25.329424051Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202aea3a4d7c03c1ded021b11cd5993bc026a9844c6d53ffc1bf74151d270c8","message_num":33730211,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:25.33181346Z","caller":"first/second.go:299","message":"processing message","message_id":"0202aea3a4d7c03c1ded021b11cd5993bc026a9844c6d53ffc1bf74151d270c8","message_num":33730211,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:26.016710579Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202aea435a22a8e195f12e21f198c6f4f3e99b0fea6c8b1ceefa1f4a83927d4","message_num":33730212,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:26.023318857Z","caller":"first/second.go:299","message":"processing message","message_id":"0202aea435a22a8e195f12e21f198c6f4f3e99b0fea6c8b1ceefa1f4a83927d4","message_num":33730212,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:26.499522774Z","caller":"first/second.go:87","message":"pre-processing message","message_id":"0202aea52679b544d3f5dcb3ec6f5a5142a4444bc5625d9b925c39680a68dec8","message_num":33730213,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"87","function":"main.(*MessagePipeline).PreprocessMessage"}}`,
		`{"severity":"INFO","time":"2018-12-24T06:38:26.506762121Z","caller":"first/second.go:299","message":"processing message","message_id":"0202aea52679b544d3f5dcb3ec6f5a5142a4444bc5625d9b925c39680a68dec8","message_num":33730213,"labels":{},"logging.googleapis.com/sourceLocation":{"file":"/root/go/src/github.com/acme/project/first/second.go","line":"299","function":"main.(*MessagePipeline).ProcessMessage"}}`,
	}
}
